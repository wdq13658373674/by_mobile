<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=UMxU4HvPSAi8X0B8FXwGxVhS"></script>
	<script type="text/javascript" src="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script>
	<link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css" />
    <title>百度地图导航</title>
</head>
<body>
    <div id="allmap" style="width: 100%;height: 500px;"></div>
<script type="text/javascript">
    // 百度地图API功能
    var map = new BMap.Map('allmap');
    var poi = new BMap.Point(106.572138, 29.644047);
    map.centerAndZoom(poi, 11);
    map.enableScrollWheelZoom();

    var content = '<div style="margin:0;line-height:20px;padding:2px;">' +
                    '<img src="../img/baidu.jpg" alt="" style="float:right;zoom:1;overflow:hidden;width:100px;height:100px;margin-left:3px;"/>' +
                    '地址：重庆市北部新区栖霞路16号8幢4-2、4-3<br/>电话：(023)68806003<br/>简介：佰誉艺术在重庆有多个分校。' +
                  '</div>';
    //创建检索信息窗口对象
    var searchInfoWindow = null;
    searchInfoWindow = new BMapLib.SearchInfoWindow(map, content, {
        title: "佰誉艺术",      //标题
        width: 290,             //宽度
        height: 105,              //高度
        panel: "panel",         //检索结果面板
        enableAutoPan: true,     //自动平移
        searchTypes: [
				BMAPLIB_TAB_TO_HERE,  //到这里去
			]
    });
    var marker = new BMap.Marker(poi); //创建marker对象
    marker.enableDragging(); //marker可拖拽
    marker.addEventListener("click", function (e) {
        searchInfoWindow.open(marker);
    })
    map.addOverlay(marker); //在地图中添加marker
    var label = new BMap.Label("佰誉艺术", { offset: new BMap.Size(20, -10) });
    label.addEventListener("click", function (e) {
        searchInfoWindow.open(marker);
    })
    marker.setLabel(label);
    /*
    var map = new BMap.Map("allmap");
    var start = "重庆市南岸区亚太路1号-附159号";
    var end = "重庆市北部新区栖霞路16号8幢";
    map.centerAndZoom(new BMap.Point(106.572138,29.644047), 11);
    //三种驾车策略：最少时间，最短距离，避开高速
    var routePolicy = [BMAP_DRIVING_POLICY_LEAST_TIME,BMAP_DRIVING_POLICY_LEAST_DISTANCE,BMAP_DRIVING_POLICY_AVOID_HIGHWAYS];
    map.clearOverlays(); 
    //var i=$("#driving_way select").val();
    search(start,end,BMAP_DRIVING_POLICY_LEAST_TIME); 
    function search(start,end,route){ 
    var driving = new BMap.DrivingRoute(map, {renderOptions:{map: map, autoViewport: true},policy: route});
    driving.search(start,end);
    }
    // 百度地图API功能
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(106.572138,29.644047);
    map.centerAndZoom(point,12);
    var marker = new BMap.Marker(point);  // 创建标注
    map.addOverlay(marker);
	
    var geolocation = new BMap.Geolocation();
    geolocation.getCurrentPosition(function(r){console.log(r.point)
    if(this.getStatus() == BMAP_STATUS_SUCCESS){
    var mk = new BMap.Marker(r.point);
    map.addOverlay(mk);//标出所在地
    map.panTo(r.point);//地图中心移动
    //alert('您的位置：'+r.point.lng+','+r.point.lat);
    var point = new BMap.Point(r.point.lng,r.point.lat);//用所定位的经纬度查找所在地省市街道等信息
    var gc = new BMap.Geocoder();
    gc.getLocation(point, function(rs){
    var addComp = rs.addressComponents; console.log(rs.address);//地址信息
    //alert(rs.address);//弹出所在地址
    });
    }else {
    alert('failed'+this.getStatus());
    }        
    },{enableHighAccuracy: true})
    // 百度地图API功能
    var map = new BMap.Map("allmap");
    var start = "天安门";
    var end = "百度大厦";
    map.centerAndZoom(new BMap.Point(116.404, 39.915), 11);
    //三种驾车策略：最少时间，最短距离，避开高速
    var routePolicy = [BMAP_DRIVING_POLICY_LEAST_TIME,BMAP_DRIVING_POLICY_LEAST_DISTANCE,BMAP_DRIVING_POLICY_AVOID_HIGHWAYS];
    $("#result").click(function(){
    map.clearOverlays(); 
    var i=$("#driving_way select").val();
    search(start,end,routePolicy[i]); 
    function search(start,end,route){ 
    var driving = new BMap.DrivingRoute(map, {renderOptions:{map: map, autoViewport: true},policy: route});
    driving.search(start,end);
    }
    });
    // 百度地图API功能
    var map = new BMap.Map("allmap");
    var point = new BMap.Point(106.572138,29.644047);
    map.centerAndZoom(point,12);
    var geoc = new BMap.Geocoder();    
    var marker = new BMap.Marker(point);  // 创建标注
    map.addOverlay(marker);
    map.addEventListener("click", function(e){        
    var pt = e.point;
    geoc.getLocation(pt, function(rs){
    var addComp = rs.addressComponents;
    alert(addComp.province + ", " + addComp.city + ", " + addComp.district + ", " + addComp.street + ", " + addComp.streetNumber);
    });        
    });
    */
</script>


</body>
</html>